<% indent = 0; @config[:modules].each do |m|%><%= "#{" "*indent}module #{ m.camelize}" %>
<% indent += 2; end; %>
<%= "#{' ' * indent}" %>class <%= @config[:controller_class_name] %>Controller < <%= @config[:base_class] %>

  <%= "#{' ' * indent}" %>include JsonapiCrud::Actions

  <%= "#{' ' * indent}" %>private

  <%= "#{' ' * indent}" %>def valid_params
    <%= "#{' ' * indent}" %>p_attributes.permit(<%= @config[:params].join(", ")  %>)
  <%= "#{' ' * indent}" %>end

<%= "#{' ' * indent}" %>end

<% indent -= 2 %><% @config[:modules].each do %><%= "#{" "*indent}end" %><% indent -= 2 %>
<% end %>


