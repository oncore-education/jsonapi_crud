# JsonapiCrud

This is currently in Alpha.  

A fully documented, production ready release will be avaialbe in october 2018

JsonapiCrud was designed to remove the repetition in creating controllers in rails and conforms to the [JSON API Spec](http://jsonapi.org) with a few exceptions.


### JSON API Exceptions
1) Create related models in a single request.  This was added for convenience for creating complex data models that rely on other models existing. 
2) The library, by default, expects _ (underscores) instead of - (dashes) for multi-word models and relationships.  This is mostly preference, but it also alleviates some issues with serialization on the front end.  

### Soft Deleting
The api supports soft deleting with the gem [paranoia](http://github.com)

There is also a set of helper methods included for use with rspec documented below.

## Installation

Add this line to your application's Gemfile:

```ruby
gem 'jsonapi_crud', :git => 'https://github.com/oncore-education/jsonapi_crud.git'
```

And then execute:
```ruby
$ bundle
```
To finalize installation execute:
```ruby
$ rails generate jsonapi_crud:install
```

## Usage
Simply include the actions mixin to your controller

```ruby
class MyController < ApiController
  include JsonapiCrud::Actions
end
```

## Generators

### Controller
If you w ant to use the generators for creating controllers you should first configure outputs in `config/initializers/jsonapi_curd.rb`
```ruby
JsonapiCrud.configure do |config|
  config.controller_output = "app/controllers/v1"
  config.controller_modules = ["v1"]
  config.base_url = "/v1"
  config.base_class = "ApiController"
end
```
You can then run

    $ rails generate jsonapi_crud:controller [CONTROLLER_NAME]
    
Which will create a class like this:
```ruby
# Generated by jsonapi_crud https://github.com/oncore-education/jsonapi_crud
module V1
  class MyController < ApiController
    include JsonapiCrud::Actions
  end
end
```

It will also create a spec file for testing requests to the controller.


## Test Helpers

TODO: document rspec testing

## Development

This gem is still being actively developed.  In its current alpha state it only works inside of another rails project.

## Contributing

Bug reports and pull requests are welcome at [https://github.com/oncore-education/jsonapi_crud](https://github.com/oncore-education/jsonapi_crud).

## License

The gem is available as open source under the terms of the [MIT License](https://opensource.org/licenses/MIT).
